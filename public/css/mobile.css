/* Mobile / small-screen overrides for public/index.html
   Breakpoints: small phones (<=420px), phones/tablets (<=768px)
   Place this after the main styles in the document head:
   <link rel="stylesheet" href="/public/css/mobile.css">
*/

/* Base adjustments for all small screens */
@media (max-width: 768px) {
  /* Reduce heavy backgrounds for mobile to save bandwidth & improve readability */
  body {
    margin: 12px;
    background: linear-gradient(180deg, #000014, #01103a);
    font-size: 16px;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
  }

  /* Container and main layout stack vertically */
  .container {
    background: none;
    background-image: none;
    padding: 12px;
    height: auto;
    min-height: 100vh;
    align-items: flex-start;
  }

  .main-layout {
    flex-direction: column;
    align-items: stretch;
    gap: 12px;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  /* Profile panel should be full width and compress spacing */
  .profile-section {
    min-width: auto;
    max-width: 100%;
    width: 100%;
    padding: 18px;
    margin: 0;
    border-radius: 12px;
  }

  /* Grid should be single column with consistent spacing */
  .grid-wrapper {
    max-width: 100%;
    width: 100%;
    margin: 0;
    padding: 8px;
    border-radius: 12px;
  }
  .grid {
    grid-template-columns: 1fr;
    gap: 8px;
    padding: 8px;
    min-height: auto;
  }
  .image-grid img {
    max-width: 100%;
    width: 100%;
    height: auto;
    max-width: 240px;
  }

  /* Headings and large text scale down */
  h1 {
    font-size: 1.4rem;
    letter-spacing: 2px;
    margin-bottom: 12px;
  }
  #p {
    font-size: 1.25rem;
    margin-top: 12%;
  }

  .button-row {
    flex-wrap: wrap;
    gap: 10px;
  }
  .button-row button {
    flex: 1 1 auto;
    min-width: 120px;
    padding: 12px;
    font-size: 15px;
  }

  /* Arrows & navigation: smaller and touch-friendly */
  .arrow {
    font-size: 2rem;
    padding: 8px;
    width: 44px;
    height: 44px;
    display: inline-flex;
    align-items:center;
    justify-content:center;
  }

  /* Make popups full-screen friendly */
  .popup-overlay, .overlay, #popup1.popup-overlay {
    display: none; /* toggled by JS */
    position: fixed;
    inset: 0;
    padding: 12px;
    background: rgba(2,6,23,0.95);
  }

  .popup-box {
    width: 100%;
    max-width: 100%;
    min-height: 60vh;
    height: auto;
    border-radius: 12px;
    padding: 16px;
    box-sizing: border-box;
    overflow-y: auto;
  }

  /* Overlay content stacks vertically and uses full width */
  .overlay-content {
    flex-direction: column;
    width: 100%;
    height: 100%;
    max-height: 100%;
    padding: 12px;
    gap: 10px;
  }

  /* Columns in overlay become full-width stacked */
  #dmBox,
  #chatSidebar,
  #messages-column,
  #messagesbox,
  #dmmessages,
  #online-members {
    flex: 0 0 auto;
    width: 100%;
    padding: 10px;
    margin: 0;
  }

  /* Inputs, buttons: full-width and finger-friendly */
  #dmInput, #m, #dmForm input, #form input, #searchBar, .palak input, .palak textarea {
    font-size: 16px;
    padding: 12px;
    width: 100%;
    border-radius: 12px;
  }
  #dmForm button[type="submit"], #sendBtn, .palak button.register, .support button {
    padding: 12px 16px;
    min-height: 44px;
    font-size: 16px;
    border-radius: 12px;
    width: auto;
  }

  /* Make lists easier to scroll and tap */
  #dmMessages, #roomList, #messages, #members-list {
    max-height: 36vh;
    -webkit-overflow-scrolling: touch;
  }

  /* Holo card and profile images scale down */
  .holo-card {
    max-width: 100%;
    min-height: 320px;
    padding: 20px;
  }
  #profile-img, .palak .img span {
    width: 96px;
    height: 96px;
  }

  /* Support overlay */
  .support {
    width: 100%;
    max-width: 420px;
    margin: 0 auto;
  }

  /* Tidy up margins/paddings */
  .content, .middlecont, .palak, .support {
    margin: 0;
    padding: 0 6px;
  }

  /* Remove decorative heavy box-shadows on small screens */
  .profile-section, .grid-wrapper, .popup-box, .holo-card {
    box-shadow: none;
    border: 1px solid rgba(255,255,255,0.04);
    background: linear-gradient(180deg, rgba(12,14,28,0.7), rgba(18,24,40,0.9));
  }
}

/* Extra small phones (<=420px) - tighter tuning */
@media (max-width: 420px) {
  body {
    font-size: 15px;
    margin: 8px;
  }

  /* More compact header */
  h1 {
    font-size: 1.15rem;
    letter-spacing: 1px;
  }
  #p {
    font-size: 1.05rem;
    margin-top: 8%;
  }

  .button-row button {
    font-size: 14px;
    padding: 10px;
    min-width: 100px;
  }

  /* Reduce grid gutters */
  .grid {
    gap: 6px;
    padding: 6px;
  }

  .image-grid img {
    max-width: 100%;
    border-radius: 8px;
  }

  /* Make popup close control easier to tap */
  .close-btn {
    top: 10px;
    right: 10px;
    font-size: 1.6rem;
    padding: 6px;
  }

  /* Ensure minimum touch target for small-action icons */
  .arrow, #dmAttachBtn, #btnDMs, #btnRooms, #btnCreateRoom {
    min-width: 44px;
    min-height: 44px;
    padding: 8px;
  }

  /* Reduce overlay paddings to maximize usable space */
  .overlay-content, .popup-box {
    padding: 10px;
  }

  /* Make registration form controls full width and easy to read */
  #popup5 .popup-box form#registerForm > * {
    margin-top: 12px;
    width: 100%;
  }

  /* Hide decorative animation overlay to improve performance */
  .animation-overlay { display: none !important; }

  /* Fallback for devices with low viewport height (keyboard open) */
  .popup-box, .overlay-content {
    max-height: calc(100vh - 40px);
    height: auto;
  }
}

/* Accessibility helpers for mobile: enough contrast & focus styles */
@media (max-width: 900px) {
  button, a, input, textarea, select {
    -webkit-tap-highlight-color: rgba(255,255,255,0.06);
  }
  button:focus, a:focus, input:focus, textarea:focus {
    outline: 3px solid rgba(99,102,241,0.24);
    outline-offset: 2px;
    border-radius: 8px;
  }
}
