 <html lang="en">
      <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet"  href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <title>Cyber Fighters</title>
    <style src="./public/style2.css"> </style>
  </head>
  <body>
  
    <div id="body_1">
      <p id="wel">Welcome</p><br>
      <p id="to">to</p><br>
      <p id="cf">Cyber Fighters</p><br>
      <button id="login_btn" onclick="toggle_login()" role="button">Login/Register</button>
      <div id="login_box" style="display: none;">
        <button onclick="toggle_login()" title="close" aria-label="Close" style="width:4%; margin-right: 1%;">&#10006;</button>
        <h1 style="color:red; text-shadow: 0 0 8px #000, 0 0 3px #000, 0 0 12px #000, 0 0 10px red;">Login Form</h1>
        <form action="" method="post" id="loginForm">
          <label for="username">Username :</label><br>
          <input type="text" id="username" name="username" placeholder="Enter your username..." required autocomplete="off"><br>
          <label for="password">Password :</label><br>
          <input type="password" name="password" id="password" placeholder="Enter Your Password..." required><br>
          <button onclick="login_submit()">Login</button><br>
          <p style="font-size:18px; color:red; text-shadow: 0 0 8px #000, 0 0 3px #000, 0 0 12px #000, 0 0 10px red; font-weight:bold; margin-top:10%;">Not a member?</p>
        </form>
          <button onclick="toggle_register()" title="register" aria-label="register" id="register" style="width:30%;">Sign up</button>
        
      </div> 
    </div>
    
    <div id="registration-form-container" style="display:none;">
      <button onclick="toggle_register()" title="close" aria-label="Close" style="width:8%; margin-right: 1%;">&#10006;</button>
      <form method="post" action="/home/html/chat2" enctype="multipart/form-data" id="registrationForm">
                <input name="email" type="email" placeholder="Email address"  />
                <input id="username" name="username" type="text" placeholder="Username"  />
                <input id="password" name="password" type="password" placeholder="Password"  />
                <input id="height" name="height" type="text" placeholder="Height"  />
                <input id="weight" name="weight" type="text" placeholder="Weight"  />
                <input id="age" name="age" type="text" placeholder="Age"  />
                <label for="nativeLanguage">Native Language:</label>
                <select name="nativeLanguage" id="nativeLanguage" >
                    <option value="en">English</option>
                    <option value="es">Spanish</option>
                    <option value="mandarin">Mandarin</option>
                    <option value="hi">Hindi</option>
                    <option value="ar">Arabic</option>
                    <!-- Add more languages as options here -->
                </select>
                <input id="info" name="info" type="text" placeholder="Info (e.g., interests)"  />

                <input type="file" name="image" accept="image/*"  />
                <input type="submit" onclick="register_submit()" value="Register" />
            </form>
    </div>
    <div id="body_2">
    <div id="mySidebar" class="sidebar">
  
          <div id="members-column-user">
          <ul id="online-users" class="no-bullets"></ul>
          </div>
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
  <a href="#">About</a>
  <a href="#">Rules</a>
  <a href="#">Terms of Service</a>
  <a href="#">User Settings</a>
</div>

<div id="main">
  <button class="openbtn" onclick="openNav()">☰ Menu</button>  
  </div>
    <div id="columns-container">
        
      
        <div id="messages-column">
          <div style="text-shadow: 0 0 7px lightskyblue, 0 0 4px lightskyblue,  0 0 10px lightskyblue, 0 0 12px lightskyblue; color: ghostwhite; margin-left:70%; z-index:2;">Main_Chat</div>
          <ul id="messages" class="no-bullets"></ul>
          
        </div>
      </div>
     

      <form id="form" action="#" enctype="multipart/form-data">
       <input id="m" placeholder="Type your message here..." autocomplete="off" style="width: 70%; height:62px; box-shadow:  0 2px 4px  rgba(7, 1, 1, 0.41), 0 7px 13px -3px rgba(0, 0, 0, 0.91),inset 0 -3px 0  rgba(0, 0, 0, 0.51);" />
        <button style="background-color: green; color: white; width: 7%; height:55px; border-radius:10%/10%;  box-shadow-left: 2px solid grey;  box-shadow-bottom: 2px solid grey; margin-left: -0.5%;">Send</button>  <label for="image-input"> <i class="material-icons">attachment</i> </label> <input type="file" id="image-input" accept="image/*" style="width: 10%;"/>
      </form>
      </div>
      </div>
  </body>
  <script>
  
        // Handle login form submission
       // async function login_submit(event) {
       //  const formData = new FormData(document.getElementById('loginForm'));

         // try {
           // const response = await fetch('/login', { // Make sure the endpoint matches your server configuration
             // method: 'POST',
             // body: formData, // FormData will be sent correctly with 'multipart/form-data' automatically set
            // });
            // const data = await response.json();


            // if(response.ok) {
              // Login successful
              // alert("Login successful!");
              // localStorage.setItem('token', 'true'); // You can adjust based on how you handle authentication tokens
              // localStorage.setItem('name', `${document.getElementById('username').value}`);
              // localStorage.setItem('languagePreference', 'en');
              // window.location.href = '/chat.html'; // Redirect user to the chat page
            // } else {
              // Login failed
              // alert("Login failed: " + data.message);
            //}
          // } catch (error) {
            // console.error('Error during login:', error);
            //alert('Login attempt failed. Please try again.');
          //}
        //} 
      
      function toggle_login() {
        var login_btn = document.querySelector("#login_btn");
        var login_box = document.querySelector("#login_box");
        var register_box = document.querySelector("#registration-form-container");
        login_box.style.display = login_box.style.display === "none" ? "block" : "none";
        login_btn.style.display = login_box.style.display === "block" ? "none" : "block";
        register_box.style.display = "none"; // Hide registration form when toggling login form
      }
      function toggle_register() {
        var login_btn = document.querySelector("#login_btn");
        var login_box = document.querySelector("#login_box");
        var register_box = document.querySelector("#registration-form-container");
        login_box.style.display = "none";
        login_btn.style.display = login_box.style.display === "block" ? "none" : "block";
        register_box.style.display = register_box.style.display === "none" ? "block" : "none";
      }
      

     //async function register_submit(event) {
          //event.preventDefault(); // Prevent default form submission
          //const formData = new FormData(document.getElementById('registrationForm'));
       //const username = formData.get('username');
       //const image = formData.get('image');

          //try {
            //const response = await fetch('/upload', { // Make sure the endpoint matches your server configuration
              //method: 'POST',
              //body: formData, // FormData will be sent correctly with 'multipart/form-data' automatically set
            //});
            //const data = await response.json();

            //if(response.ok) {
              // Registration successful
              //alert("Registration successful!");
              //localStorage.setItem('token', 'true'); // You can adjust based on how you handle authentication tokens
              //localStorage.setItem('name', formData.get('username'));
              //localStorage.setItem('languagePreference', formData.get('nativeLanguage'));
              //window.location.href = '/html/chat.html'; // Redirect user to the chat page
            //} else {
              // Registration failed
              //alert("Registration failed: " + data.message);
            //}
          //} catch (error) {
            //console.error('Error during registration:', error);
            //alert('Registration attempt failed. Please try again.');
          //}
        //}
        function register_submit() {
          
          var body1 = document.querySelector("#body_1");
        var body2 = document.querySelector("#body_2");
        var register_box = document.querySelector("#registration-form-container");
        register_box.style.display = "none";
        body1.style.display = "none";
        body2.style.display = "block";
      }
        
        <script src="/socket.io/socket.io.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const socket = io();

      const signupScreen = document.getElementById('login_box');
      const chatScreen = document.getElementById('messages-column');
      const signupForm = document.getElementById('loginForm');
      const usernameInput = document.getElementById('username');
      const messageInput = document.getElementById('m');
      const messagesList = document.getElementById('messages');

      signupForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const username = usernameInput.value.trim();
        if (username) {
          localStorage.setItem('username', username);
          signupScreen.style.display = 'none';
          chatScreen.style.display = 'block';
          socket.emit('set username', username);
        }
      });

      document.getElementById('form').addEventListener('submit', (e) => {
        e.preventDefault();
        const message = messageInput.value.trim();
        if (message) {
          socket.emit('chat message', message);
          messageInput.value = '';
        }
      });

      socket.on('chat message', (msg) => {
        const item = document.createElement('li');
        item.textContent = `${msg.date} - ${msg.username} - ${msg.message}`;
        messagesList.appendChild(item);
        saveMessageLocally(msg);
      });

      function saveMessageLocally(msg) {
        let messages = JSON.parse(localStorage.getItem('messages')) || [];
        messages.push(msg);
        localStorage.setItem('messages', JSON.stringify(messages));
      }

      function loadMessagesFromLocalStorage() {
        const messages = JSON.parse(localStorage.getItem('messages')) || [];
        messages.forEach((msg) => {
          const item = document.createElement('li');
          item.textContent = `${msg.date} - ${msg.username} - ${msg.message}`;
          messagesList.appendChild(item);
        });
      }

      loadMessagesFromLocalStorage();
    });
  </script>
      </script>
</html>